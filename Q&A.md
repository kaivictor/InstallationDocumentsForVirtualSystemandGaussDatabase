## Q 之前还可以连接，这次连接不上了

A 请按照下面的逻辑检查
- 如果你是远程连接：
  你要确保虚拟系统可以访问，防火墙没有拦截，
  1. 先尝试ssh能否连接虚拟系统；
  2.1 如果虚拟系统可以连接，请检查数据库端口是否开放，有没有限制，比如禁止远程连接；
  2.2 如果虚拟系统无法连接，请在网络上搜索方法，《无法访问虚拟机》z只是情况之一；
  3. 远程连接没有问题，但是还是无法访问，请参考下面的非远程连接。
- 如果你是本地连接：
  1. 确保数据库服务在运行
  2. 确保账户名、数据库名称正确
  3.1. 如果数据库服务在运行,请检查数据库是否允许登录
  3.2. 如果数据库服务未运行，请先运行
  3.3. 如果数据库服务启动失败，请根据报错内容在网上检索
  4. 目前已知的一个问题就是数据库未正常关闭会导致数据库崩溃，官方的建议是重装数据库，平时保持关闭数据库的习惯。


## Q 无法粘贴命令

A 使用 远程连接工具 的好处之一就是可以粘贴



## Q 无法访问虚拟机

A 你的这个问题应该发生在virtualBox中，首先你要排除软件问题，比如防火墙问题。我目前有两种办法

方法一：

在新建虚拟机时添加一张主机网卡

![image-20230913004607024](./assets/image-20230913004607024.png)

这样他就会像和主机一样处于同一个”局域网“当中，之后你可以在网络上搜索配置方法。之后就可以直接访问他，像VMware的NAT

方法二：

设置端口映射（转发）

![image-20230913004941780](./assets/image-20230913004941780.png)

把你想要访问端口映射到你的主机上（127.0.0.1）

# DataStudio上的提示

## Q 连接服务器出错

错误码 28000

no **pg_hab.conf** entry for **host "X.X.X.X"**

![image-20230926204552263](./assets/image-20230926204552263.png)

A 大概意思就是访问IP没有权限，你没有权限连接他。

请在 pg_hba.conf 中添加你的IP，例如图中的 10.0.2.2

## Q 连接服务器出错

错误码 28000

Foebid remote connection with **trust** method!

![image-20230926204914988](./assets/image-20230926204914988.png)

A 大概意思是不能设置为”信任“

请到 postgresql.conf 中修改 密码加密类型，到pg_hba.conf 中修改 METHOD 为相应的加密类型

## Q 连接服务器出错

Connection refused

![image-20230926210456174](./assets/image-20230926210456174.png)

A 先排除  提示1和提示2

请先检查你的虚拟机是否可以访问，使用PuTTY连接以下就行了；如果PuTTY可以登录，那么你排除防火墙的问题，关闭防火墙之后你应该就可以连接上gauss了。还不行的话请检查意见1和意见2.确认没有错误的话再联系我


## Q 出现 could not read file "/var/lib/opengauss/data/postmaster.opts"

A 先检查文件是否存在，如果不存在，你可以试着gs_ctl restart -D /var/lib/opengauss/data恢复它，或者创建一个空白文件，或者重新安装或找一下有没有备份文件（一般没有，但是你可能编辑过）。
如果文件存在，你可能需要检查以下它的权限，需要让omm用户具有读取的权限（比如600），示例代码：
chmod 600 /var/lib/opengauss/data/postmaster.opts
或者您看看有没有哪个进程锁定了文件，或者冲突。
你还可以查看日志，看看是哪一条配置出了问题。


## Q gsql -d postgres -r 显示 fail to connect unkown：7654

A 1.检查服务是否启动
2.检查你的端口是否是7654（按照教程来的话没问题）
3.**上次关机前是否关闭Gauss**。根据官方的说法 a.推荐使用Gauss企业版, b.关机前关闭Gauss, c.崩溃了？重装╮(QAQ)╭。


# Linux上的错误

## Q 打开 vim 打开文件空白

A 先检查路径有没有输入错误；如果路径没有错误，请用 ```ls```查询文件所在的文件夹下是否本来就存在该文件；

如果是gauss相关的文件不存在，但是应该存在的文件，那么你可以需要添加该文件或者重新安装gauss（你意外的把文件删掉了）







# 其他问题（翻译）

## Q 连接服务器出错

错误码 28P01

Invalid username/password, login denied

![image-20230926205332655](./assets/image-20230926205332655.png)

A 按照提示，你账户或者密码不对。*部分人在修改加密方式后没有修改密码（使密码被加密）*





# 不用担心错误

试错的过程远不止这些，查看的文档也不止教程列出的寥寥几个

![image-20230926212046951](./assets/image-20230926212046951.png)





————————————————

**OpenGauss不适合我平时使用，目前暂停此研究**
